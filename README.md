# timbuctoo-bia-import

The script ```run-bia-mapping.js``` generates an RML mapping in JSON-LD 
format, based on fixed data in ```generate-bia-mapping.js```. It is based
on the october 6 version xlsx file (2016_10_06_BIA_Master_WERFILE.xlsx)

## Preview run

Either of the following command will dump the generated RML mapping to the console:
```sh
$ npm test
$ export VRE_ID={vre} && node run-bia-mapping.js
```


## Run against Timbuctoo instance

When the script is provided with a HOST and AUTH_HEADER environment variable
it will POST the mapping document to the running timbuctoo instance identified
by the host.

In order for this to work, follow the following steps:

1. Log in to the default frontend
2. Look for the correct 'Authorization' header generated by logging in using your web console
3. Upload the aforementioned excel sheet.
4. Determine the generated VRE_ID using your web console
5. Run the script as follows

```sh
export HOST=localhost
export PORT=8080
export AUTH_HEADER=884c926f-5767-40ca-a96e-9978107fbaa2 # (replace with the correct header value)
export VRE_ID=12345677890____________BIA_Master_WERFILE # (replace with the correct VRE_ID)
node run-bia-mapping.js
```
